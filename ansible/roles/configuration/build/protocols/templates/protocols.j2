#jinja2: lstrip_blocks: "True (or False)", trim_blocks: "True (or False)"
{#- ---------------------------------------------------------------------------------- #}
{# Protocols                                                                           #}
{# ---------------------------------------------------------------------------------- -#}
protocols {
    {% if route_or_switch == "switch" %}
    mstp {
        configuration-name redtail;
        bridge-priority 32k;
        interface ge-0/0/0 {
            mode point-to-point;
        }
        interface ge-0/0/1 {
            edge;
        }
        msti 1 {
            bridge-priority 60k;
            vlan 1-4094;
        }
    }
    {% else %}
    bgp {
        group datacenter {
            type external;
            local-address {{ wan_ipv4_address }};
            export {{ bgp_export }};
            import {{ bgp_import }};
            peer-as 65000;
            log-updown;
            family inet {
                unicast;
            }
            neighbor {{ bgp_peer_ip }} {
                description "Data Center firewall";
            }
        }
    }
    {% endif %}
}
